<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tabella - Traduzioni</title>
  <link rel="icon" type="image/png" href="Immagini/plumboblogo.png">
  <style>
    :root {
          --navbarbackground: #343a40;
          --navbarcolor: #fff;
          --formcontainerbackground: #343a40;
          --formcontainercolor: #fff;
          --h1backgroundcolor: #343a40;
          --h1color: white;
          --thchildcolor: #666666;
          --tdcolor: #555555;
          --thcolor: white;
          --bodybackground: #343a40;
          --sconosciutavar: #545454;
          --thtdcolor: white;
          --tdacolor: #B57EDC;
          --tdahover: #FFB6C1;
          --tdactive: #8E44AD; 
        }
    
        #filter-status-dropdown, #filter-translation-dropdown, #filter-category-dropdown {
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    td a {
  color: var(--tdacolor);
}

td a:visited {
  color: var(--tdacolor);
}

td a:hover {
  color: var(--tdahover);
}

td a:active {
  color: var(--tdactive);
}
        .navbar {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-around;
      align-items: center;
      background-color: var(--navbarbackground);
      padding: 10px;
      border-bottom: 3px solid #f9359d; /* Bordo inferiore della navbar */
    }
    
    .navbar a, .navbar button {
      color: var(--navbarcolor);
      text-decoration: none;
      background-color: #4CAF50; /* Usa il colore di sfondo dal nuovo design */
      padding: 10px 20px; /* Pi√π spazio cliccabile */
      border-radius: 5px; /* Raggio bordi pi√π ampio */
      border: none;
      margin: 5px;
      cursor: pointer;
      transition: background-color 0.3s ease, transform 0.2s ease;
      font-size: 16px; /* Font pi√π grande */
      text-align: center; /* Per centrare il testo */
      font-weight: bold;
    }
    
    .navbar a:hover, .navbar button:hover {
      background-color: #0f7041; /* Colore hover pi√π intenso */
      transform: scale(1.05); /* Leggero ingrandimento al passaggio del mouse */
    }
.sort-arrow {
  margin-left: 5px;
  font-size: 20px;
  color: var(--h1color);
}
    
    .sort-arrow.asc:before {
      content: "‚Üë"; /* Freccia su per l'ordinamento ascendente */
    }
    
    .sort-arrow.desc:before {
      content: "‚Üì"; /* Freccia gi√π per l'ordinamento discendente */
    }
          .scroll-to-top {
      position: fixed;
      bottom: 20px;
      right: 20px;
      display: none; /* Sar√† visibile solo quando necessario */
      width: 50px;
      height: 50px;
      background-color: #f05454;
      color: white;
      text-align: center;
      line-height: 50px;
      font-size: 24px;
      font-weight: bold;
      border-radius: 50%;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      cursor: pointer;
      transition: opacity 0.3s, transform 0.3s;
      z-index: 1000;
    }
    
    .scroll-to-top:hover {
      background-color: #d94343; /* Colore pi√π scuro al passaggio del mouse */
      transform: scale(1.1); /* Leggera animazione di ingrandimento */
    }
    
    .scroll-to-top:active {
      transform: scale(0.95); /* Riduce leggermente le dimensioni al clic */
    }
   .back-arrow {
      position: absolute;
      top: 10px;
      left: 10px;
      text-decoration: none;
      font-size: 20px;
      color: #16ab63;
      font-weight: bold;
      transition: color 0.3s ease, transform 0.2s ease;
      display: flex;
  align-items: center;
  text-decoration: none;
    }

    .back-arrow:hover {
      color: #16ab63;
      transform: scale(1.1);
    }
          
        body {
          font-family: Arial, sans-serif;
          background-color: var(--bodybackground);
          margin: 0;
          padding: 0;
        }
        
        input, select {
          margin: 10px 5px;
          padding: 10px;
          border-radius: 25px;
          border: 1px solid #ccc;
          font-size: 16px;
        }
    
        input:focus, select:focus {
          outline: none;
          border-color: #16ab63;
        }
    
        .form-container {
          display: flex;
          flex-wrap: wrap;
          justify-content: flex-start;
          align-items: center;
          margin-top: 0px; /* Riduci lo spazio sopra */
          margin-bottom: 0px; /* Riduci lo spazio sotto */
          padding: 5px;
          border: 1px solid var(--formcontainerbackground);
          border-radius: 5px;
          background-color: var(--formcontainerbackground);
          color: var(--formcontainercolor);
          gap: 60px;
        }
    
        .form-container label {
          margin-right: 10px;
          font-size: 16px;
        }
    
        input, select {
          margin: 5px;
        }
    
        .button-container {
          display: flex;
          flex-wrap: wrap;
          justify-content: center;
          gap: 10px;
        }
    
        h1 {
          color: var(--h1color);
          font-size: 2rem;
          margin: 0;
          padding: 20px 0;
          background-color: var(--h1backgroundcolor);
          text-align: center;
        }
    
        table {
          width: 100%;
          border-collapse: separate;
          border-spacing: 0;
          margin-top: 20px;
          border-radius: 10px;
          overflow: hidden;
          table-layout: auto;
        }
    
        th, td {
          padding: 15px 20px;
          text-align: center;
          border: 1px solid #ddd;
          font-size: 16px;
          word-wrap: break-word;
          color: var(--thtdcolor)
        }
    
        th {
          background-color: #4CAF50;
          color: var(--thcolor);
        }
    
        td {
          background-color: var(--tdcolor);
        }
    
        tr:nth-child(even) td {
          background-color: var(--thchildcolor);
        }
    
        .status {
          font-weight: bold;
          padding: 5px;
          border-radius: 5px;
          display: inline-block;
          width: auto;
          height: auto;
          text-transform: uppercase;
          color: white;
        }
    
    .status.nuova {
      color: #9372ff;
    }
      
    .status.compatibile {
      color: #008eff;
    }

    .status.rotta {
      color: #ff0015;
    }

    .status.obsoleta{
      color: var(--sconosciutavar)
    }
    
    .status.sconosciuta {
      color: var(--sconosciutavar);
    }

    .status.aggiornata {
      color: #00d517;
    }

    .status.da-aggiornare {
      color: var(--sconosciutavar)
    }

    .status.in-lavorazione{
    color: #ff57cb
    }
/* Stile per il popup */
.popup {
    display: none;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: var(--navbarbackground);
    color: var(--navbarcolor);
    padding: 20px;
    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.3);
    border-radius: 10px;
    z-index: 1000;
    text-align: center;
}

.popup-content button {
    margin: 10px;
    padding: 10px;
    border: none;
    cursor: pointer;
}

#download-btn {
    background: #28a745;
    color: white;
}

#close-btn {
    background: #dc3545;
    color: white;
}  
    @media (max-width: 600px) {
          h1 {
            font-size: 1.5rem;
            padding: 10px;
          }
    
          .navbar a, .navbar button {
            font-size: 14px;
            padding: 10px;
            width: 100%;
          }
    
          .form-container {
            flex-direction: column;
            align-items: flex-start;
          }
        }
    
        .star-container {
          display: flex;
          justify-content: center;
          align-items: center;
          width: 100%;
          height: 100%;
        }
    
        .star {
          font-size: 24px;
          cursor: pointer;
          color: grey;
          transition: transform 0.2s;
        }
    
        .star.favorite {
          color: gold;
        }
    
        .star:hover {
          transform: scale(1.2);
        }
      </style>
</head>
<body>
  <a href="index.html" class="back-arrow">
    <img src="Immagini/plumboblogonoscritte.png" alt="Home Logo" width="50" height="auto">
    <span class="home-text">HOME</span>
  </a>
  <h1>Tabella - Traduzioni</h1>
  <div class="navbar">
    <a href="mod.html">MOD</a>
    <a href="mod18.html">MOD +18</a>
    <a href="animazioniww18.html">ANIMAZIONI WICKED WHIMS +18</a>
    <a href="traduzioni.html">TRADUZIONI</a>
    <a href="programmi.html">PROGRAMMI</a>
    <a href="#" id="desc-mod-btn">HELP SIM</a>
    <button id="themeSwitch" onclick="toggleTheme()" class="theme-toggle" title="Cambia Tema">üåô</button>
  </div>
  <div id="popup" class="popup">
    <div class="popup-content">
        <h2>üöÄ HELP SIM</h2>
        <p>
          Stanco di installare mod e traduzioni a mano? Help Sim √® qui per salvarti! 
          Con pochi click, potrai aggiungere le tue mod preferite, tenere tutto sotto controllo e persino dare una bella ripulita ai file cache di The Sims 4!
          Che tu voglia ampliare il tuo gioco con nuove mod o semplicemente tenere tutto in ordine, sei nel posto giusto.
        </p>
        
        <p>Ora rilassati, personalizza il tuo gioco e lascia che <strong>Help Sim</strong> faccia il resto! üéÆ‚ú®</p>
        
        <hr>
  
        <h3>‚ö†Ô∏è PICCOLE ATTENZIONI PRIMA DELLO SCARICO ‚ö†Ô∏è</h3>
        <ul style="list-style-type: none; padding-left: 0;">
            <li>‚òÖ Se l‚Äôantivirus blocca il programma, clicca su <strong>"Esegui comunque"</strong>.<br>
                Il programma √® sicuro! In quanto creato interamente da noi.</li>
            <li>‚òÖ Prima dell‚Äôuso, <strong>leggi la guida</strong> disponibile nella home del programma.</li>
            <li>‚òÖ Supporta solo i file delle mod e delle traduzioni in <strong>formato ZIP</strong>.</li>
            <li>‚òÖ <strong>Non supporta</strong> i file singoli <em>.package</em> (CC e mod non zip).</li>
            <li>‚òÖ <strong>Non funziona</strong> con la cartella di The Sims in unit√† esterne (HDD, SSD, USB, ecc.).</li>
        </ul>
  
        <div class="popup-buttons">
            <button id="download-btn">üì• Scarica</button>
            <button id="close-btn">‚ùå Chiudi</button>
        </div>
    </div>
  </div>
  <div class="form-container">
    <div>
      <input type="text" id="search" oninput="filterTable()" placeholder="Cerca...">
    </div>
    <div>
      <label for="filter-status">Stato:</label>
      <button onclick="toggleDropdown('filter-status-dropdown')">‚ñº</button>
      <div id="filter-status-dropdown" style="display:none;">
        <label><input type="checkbox" value="Compatibile" id="status-compatibile" onchange="filterTable()">Compatibile</label><br>
        <label><input type="checkbox" value="Rotta" id="status-rotta" onchange="filterTable()"> Rotta</label><br>
        <label><input type="checkbox" value="Aggiornata" id="status-aggiornata" onchange="filterTable()">Aggiornata</label><br>
        <label><input type="checkbox" value="Sconosciuta" id="status-sconosciuta" onchange="filterTable()">Sconosciuta</label><br>
        <label><input type="checkbox" value="Da Aggiornare" id="status-daaggiornare" onchange="filterTable()">Da Aggiornare</label><br>
        <label><input type="checkbox" value="Obsoleta" id="status-obsoleta" onchange="filterTable()">Obsoleta</label><br>
        <label><input type="checkbox" value="Nuova" id="status-nuova" onchange="filterTable()">Nuova</label>
      </div>
    </div>
    <div>
      <label for="filter-favorites">Preferiti:</label>
      <select id="filter-favorites" onchange="filterTable()">
        <option value="">Tutti</option>
        <option value="true">Preferiti</option>
        <option value="false">Non preferiti</option>
      </select>
    </div>
</div>

  <div class="container">
    <table id="modTable">
      <thead>
        <tr>
          <th onclick="sortTable(0)">PREFERITE<span class="sort-arrow" id="arrow-0"></span></th>          
          <th onclick="sortTable(1)">AUTORE MOD<span class="sort-arrow" id="arrow-1"></span></th>          
          <th onclick="sortTable(2)">NOME MOD<span class="sort-arrow" id="arrow-2"></span></th>          
          <th onclick="sortTable(3)">DATA O VERSIONE MOD<span class="sort-arrow" id="arrow-3"></span></th>          
          <th onclick="sortTable(4)">DATA O VERSIONE TRADUZIONE<span class="sort-arrow" id="arrow-4"></span></th>          
          <th onclick="sortTable(5)">STATO TRADUZIONE<span class="sort-arrow" id="arrow-5"></span></th>          
          <th onclick="sortTable(6)">TRADUTTORE<span class="sort-arrow" id="arrow-6"></span></th>          
        </tr>
      </thead>
      <tbody>
        <!-- I dati della tabella verranno popolati qui tramite JavaScript -->
      </tbody>
    </table>
  </div>

  <script>
    document.getElementById("desc-mod-btn").addEventListener("click", function(event) {
    event.preventDefault();
    document.getElementById("popup").style.display = "block";
});

document.getElementById("close-btn").addEventListener("click", function() {
    document.getElementById("popup").style.display = "none";
});

document.getElementById("download-btn").addEventListener("click", function() {
    const link = document.createElement("a");
    link.href = "https://github.com/PianetaSimTS/HelpSim/releases/download/HelpSim/HelpSim.exe";
    link.download = "HelpSim.exe";
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
    document.getElementById("popup").style.display = "none"; // Chiude il popup dopo il download
});
    // Funzione per ottenere e visualizzare i dati della tabella
  function loadModsFromJson() {    
  fetch('https://raw.githubusercontent.com/PianetaSimTS/PianetaSim/refs/heads/main/Json/traduzioni.json')
  .then(response => response.json())
  .then(mods => {
    const pageId = "traduzioni";  // Identificatore per questa pagina
    const favorites = JSON.parse(localStorage.getItem("favorites_" + pageId)) || [];
    const table = document.getElementById("modTable").getElementsByTagName("tbody")[0];
    table.innerHTML = '';
    mods.forEach(mod => {
      const isFavorite = favorites.includes(mod.Title);
      const newRow = table.insertRow();
      // Salva il link nel sessionStorage
      const modLink = mod.Link || '#';
      sessionStorage.setItem(mod.Creator, modLink);

newRow.innerHTML = `
  <td>
    <span class="star-container">
      <span class="star ${isFavorite ? 'favorite' : ''}" onclick="toggleFavorite('${mod.Title}')">&#9733;</span>
    </span>
  </td>
  <td>${mod.Creator || ''}</td>
  <td class="mod-name">${mod.Title || ''}</td>
  <td>${mod.ReleaseVersion || ''}</td>
  <td>${mod.CurrentVersion || ''}</td>
  <td><span class="status ${mod.Status === 'in-lavorazione' ? 'in-lavorazione' : mod.Status === 'da-aggiornare' ? 'da-aggiornare' : mod.Status === 'obsoleta' ? 'obsoleta' : mod.Status || 'sconosciuta'}">
    ${mod.Status === 'in-lavorazione' ? 'IN LAVORAZIONE' : mod.Status === 'da-aggiornare' ? 'DA AGGIORNARE' : mod.Status === 'obsoleta' ? 'OBSOLETA' : (mod.Status || 'Sconosciuta').toUpperCase()}</span></td>
  <td>
    <span class="traduzione ${(mod.Translator || '').replace(" ", "-").toLowerCase()}">
      <a href="${mod.Link || '#'}" target="_blank">${mod.Translator || ''}</a>
    </span>
  </td>
`;
    });
    checkModUpdates(mods);
    filterTable();
  })
  .catch(error => console.error('Errore nel caricare il JSON:', error));
}

function checkModUpdates(mods) {
  let favorites = JSON.parse(localStorage.getItem("favorites_traduzioni")) || [];
  let savedMods = JSON.parse(localStorage.getItem("savedTraduzioni")) || {};

  let updatedMods = [];

  mods.forEach(mod => {
    if (favorites.includes(mod.Title)) {
      let prevData = savedMods[mod.Title] || {};

      // Controllo che CurrentVersion e ReleaseVersion siano correttamente lette
      console.log(`Checking mod: ${mod.Title}`);
      console.log(`CurrentVersion: ${mod.CurrentVersion}, ReleaseVersion: ${mod.ReleaseVersion}`);

      // Usa CurrentVersion come data, se non c'√® usa ReleaseVersion
      let dataUltimaModifica = mod.CurrentVersion || mod.ReleaseVersion || "Data non disponibile";

      if (!prevData.Status || !prevData.DataUltimaModifica || 
          prevData.Status !== mod.Status || prevData.DataUltimaModifica !== dataUltimaModifica) {
        updatedMods.push(mod);
      }

      // Aggiorna i dati salvati
      savedMods[mod.Title] = {
        Status: mod.Status || 'sconosciuto',
        DataUltimaModifica: dataUltimaModifica
      };
    }
  });

  localStorage.setItem("savedTraduzioni", JSON.stringify(savedMods));

  // Se ci sono mod aggiornate, mostra una notifica
  if (updatedMods.length > 0) {
    let message = "Le seguenti mod preferite sono state aggiornate:\n" + 
                  updatedMods.map(mod => `${mod.Title} - Stato: ${mod.Status} (${mod.CurrentVersion || mod.ReleaseVersion || 'Data non disponibile'})`).join("\n");
    alert(message);
  }
}

 let lastSortedColumn = -1; // Memorizza l'ultima colonna ordinata
    let lastSortDirection = 'asc'; // Ordine di ordinamento: ascendente (default) o discendente

    function sortTable(columnIndex) {
      const table = document.getElementById("modTable");
      const rows = Array.from(table.rows).slice(1); // Esclude l'intestazione
      const arrow = document.getElementById(`arrow-${columnIndex}`);

      if (lastSortedColumn === columnIndex) {
        lastSortDirection = (lastSortDirection === 'asc') ? 'desc' : 'asc';
      } else {
        lastSortDirection = 'asc';
      }

      const compare = (a, b) => {
        let valA = a.cells[columnIndex].textContent.trim().toLowerCase();
        let valB = b.cells[columnIndex].textContent.trim().toLowerCase();

        if (valA < valB) return lastSortDirection === 'asc' ? -1 : 1;
        if (valA > valB) return lastSortDirection === 'asc' ? 1 : -1;
        return 0;
      };

      rows.sort(compare);
      rows.forEach(row => table.appendChild(row));

      document.querySelectorAll('.sort-arrow').forEach(arrow => arrow.className = 'sort-arrow');
      arrow.classList.add(lastSortDirection);

      lastSortedColumn = columnIndex;
    }

 function filterTable() {
  const searchValue = document.getElementById("search").value.toLowerCase();

  // Stato - raccogli i valori selezionati
  const selectedStatuses = Array.from(document.querySelectorAll('#filter-status-dropdown input:checked'))
    .map(input => input.value.toLowerCase());
  const filterFavorites = document.getElementById("filter-favorites").value.toLowerCase();

  const table = document.getElementById("modTable");
  const rows = table.getElementsByTagName("tr");

  for (let i = 1; i < rows.length; i++) { // Salta la riga di intestazione
    const row = rows[i];

    // Contenuto delle celle per la ricerca
    const author = row.cells[1]?.textContent.toLowerCase() || ""; // AUTORE MOD
    const modName = row.cells[2]?.textContent.toLowerCase() || ""; // NOME MOD

    // Stato della traduzione
    const status = row.querySelector(".status")?.textContent.trim().toLowerCase() || ""; // Rimuove eventuali spazi extra

    // Preferiti
    const isFavorite = row.querySelector(".star").classList.contains("favorite");

    // Verifica corrispondenza per ricerca, stato e preferiti
    const matchesSearch = author.includes(searchValue) || modName.includes(searchValue);
    const matchesStatus = selectedStatuses.length === 0 || selectedStatuses.some(selected => status.includes(selected));
    const matchesFavorites = !filterFavorites || (filterFavorites === 'true' ? isFavorite : !isFavorite);

    // Mostra o nasconde la riga in base ai criteri
    row.style.display = (matchesSearch && matchesStatus && matchesFavorites) ? "" : "none";
  }
}

  function toggleFavorite(author) {
  const cleanedAuthor = author.replace("'", "");
  const pageId = "traduzioni";  // Identificatore per questa pagina (pu√≤ essere unico per ogni tabella)
  let favorites = JSON.parse(localStorage.getItem("favorites_" + pageId)) || [];
  
  if (favorites.includes(cleanedAuthor)) {
    favorites = favorites.filter(favorite => favorite !== cleanedAuthor);
    alert(author + " √® stato rimosso dai preferiti.");
  } else {
    favorites.push(cleanedAuthor);
    alert(author + " √® stato aggiunto ai preferiti!");
  }
  
  localStorage.setItem("favorites_" + pageId, JSON.stringify(favorites));  // Usa l'identificatore per questa pagina
  loadModsFromJson();
}
    window.onload = loadModsFromJson;

    function applyTheme(theme) {
  const root = document.documentElement;
  const themeSwitch = document.getElementById("themeSwitch");
  
  if (theme === "light") {
    root.style.setProperty("--navbarbackground", "#ffffff"); // Grigio molto chiaro per la navbar
root.style.setProperty("--navbarcolor", "#000000"); // Testo scuro per la navbar
root.style.setProperty("--formcontainerbackground", "#ffffff"); // Bianco per lo sfondo del contenitore
root.style.setProperty("--formcontainercolor", "#black"); // Testo scuro nel contenitore
root.style.setProperty("--h1backgroundcolor", "#ffffff"); // Grigio chiaro per sfondo h1
root.style.setProperty("--h1color", "#black"); // Testo scuro per h1
root.style.setProperty("--thchildcolor", "#f2f2f2"); // Grigio medio per i titoli delle colonne
root.style.setProperty("--tdcolor", "#f9f9f9"); // Grigio medio-scuro per il testo nelle celle
root.style.setProperty("--thcolor", "#000000"); // Testo scuro per i titoli delle colonne
root.style.setProperty("--bodybackground", "#ffffff"); // Sfondo bianco per il corpo
root.style.setProperty("--sconosciutavar", "#545454"); // Giallo brillante per mantenere un colore vivace
root.style.setProperty("--thtdcolor", "black");
root.style.setProperty("--tdacolor", "blue");
root.style.setProperty("--tdahover", "#551A8B");
root.style.setProperty("--tdactive", "#000080");    
    themeSwitch.textContent = "üåû";
  } else {
    // Passa al tema scuro
    root.style.setProperty("--navbarbackground", "#343a40");
    root.style.setProperty("--navbarcolor", "#fff");
    root.style.setProperty("--formcontainerbackground", "#343a40");
    root.style.setProperty("--formcontainercolor", "#fff");
    root.style.setProperty("--h1backgroundcolor", "#343a40");
    root.style.setProperty("--h1color", "white");
    root.style.setProperty("--thchildcolor", "#666666");
    root.style.setProperty("--tdcolor", "#555555");
    root.style.setProperty("--thcolor", "white");
    root.style.setProperty("--bodybackground", "#343a40");
    root.style.setProperty("--sconosciutavar", "#FFFBB9");
    root.style.setProperty("--thtdcolor", "white");
    root.style.setProperty("--tdacolor", "#B57EDC");
    root.style.setProperty("--tdahover", "#FFB6C1");
    root.style.setProperty("--tdactive", "#8E44AD"); 
    themeSwitch.textContent = "üåô";
  }
}
function toggleDropdown(id) {
  var dropdown = document.getElementById(id);
  var button = dropdown.previousElementSibling;

  // Cambia la visibilit√† con un fade
  if (dropdown.style.display === 'none' || dropdown.style.display === '') {
    dropdown.style.display = 'block';
    setTimeout(function() {
      dropdown.style.opacity = 1;
    }, 10);
    button.innerHTML = '‚ñ≤';
  } else {
    dropdown.style.opacity = 0;
    setTimeout(function() {
      dropdown.style.display = 'none';
    }, 300); // Attendere il tempo della transizione
    button.innerHTML = '‚ñº';
  }
}
// Funzione per alternare il tema e salvarlo
function toggleTheme() {
  const currentTheme = localStorage.getItem("theme") || "dark";
  const newTheme = currentTheme === "dark" ? "light" : "dark";
  localStorage.setItem("theme", newTheme); // Salva il tema
  applyTheme(newTheme); // Applica il tema
}

// Applica il tema al caricamento della pagina
window.onload = function () {
  const savedTheme = localStorage.getItem("theme") || "dark"; // Imposta tema di default
  applyTheme(savedTheme); // Applica il tema salvato
  loadModsFromJson(); // Carica i dati della tabella
};

window.addEventListener("scroll", function () {
  const scrollToTopButton = document.getElementById("scrollToTop");
  if (window.scrollY > 300) {
    scrollToTopButton.style.display = "block";
  } else {
    scrollToTopButton.style.display = "none";
  }
});

// Gestione dell'evento beforeunload per svuotare sessionStorage
window.addEventListener('beforeunload', () => {
  // Cancella tutti i mod link salvati in sessionStorage quando la pagina viene chiusa o ricaricata
  Object.keys(sessionStorage)
    .filter(key => key !== 'favorites') // Esclude eventualmente altre chiavi (come i preferiti)
    .forEach(key => sessionStorage.removeItem(key)); 
});

  // Scroll fluido verso l'alto
  document.getElementById("scrollToTop").addEventListener("click", function (e) {
    e.preventDefault();
    window.scrollTo({ top: 0, behavior: "smooth" });
  });

  themeSwitch.addEventListener("change", toggleTheme);
  setInitialTheme();
  </script>
  <a href="#top" class="scroll-to-top" id="scrollToTop" title="Torna in alto">&#x25B2;</a>
</body>
</html>
